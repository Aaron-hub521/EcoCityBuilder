# EcoCity Builder - Game Rules

## Gameplay

EcoCity Builder is a city-building simulation game where the player aims to build a thriving and sustainable city.

**Core Mechanics:**

1.  **Building:** Players select buildings from a menu and place them on the grid-based map.
2.  **Resource Management:** Players manage:
    *   **Money:** Used to build structures. Generated by certain buildings (Factories, Shops, etc.) and reduced by building costs. Running out of money leads to game over.
    *   **Pollution:** Generated by certain buildings (Factories, Power Plants, etc.). Some structures (Wastewater Plants) reduce pollution over time. High pollution leads to game over.
    *   **Happiness:** Affected positively or negatively by different buildings. Some buildings (Schools, Libraries) provide happiness bonuses to nearby Houses within a certain radius. Low happiness can trigger protests.
    *   **Population:** Increased primarily by building Houses. Required for certain win conditions. High pollution causes population to drop to zero.
3.  **Building Limits:** Most buildings have a maximum number that can be built.
4.  **Building Placement:** Buildings cost money to place. They cannot overlap with existing buildings.
5.  **Building Removal:** Existing buildings can be removed (by right-clicking), refunding 50% of their original cost and reversing their effects on pollution, happiness, and population.
6.  **Building Movement:** Existing buildings can be moved (by left-clicking and dragging). Moving temporarily removes the building's effects. The building must be placed in a valid, unoccupied location.
7.  **Income:** Some buildings (Factories, Shops, Airport, Science Lab, Train Station) generate income periodically.
8.  **Events:** Random events occur periodically (every 30 seconds):
    *   **Disasters (20% chance):**
        *   Earthquake: Randomly destroys one building (50% chance of being saved if within range of a Fire Station).
        *   Flood: Increases pollution by 10.
    *   **Protests:** Can occur if happiness is 30 or lower. Chance is reduced by Police Stations. Protests temporarily stop all income generation.
9.  **Area Effects:** Some buildings (Schools, Libraries) provide happiness bonuses to Houses within their effect radius. Fire Stations and Police Stations provide protective effects within their radius.

**Starting State:**

*   Money: 10000
*   Pollution: 0
*   Happiness: 0
*   Population: 0

## Win Conditions

Achieve any *one* of the following goals:

1.  **Zero Carbon City:**
    *   Pollution = 0
    *   Money >= 5000
    *   At least one building placed
2.  **Population Boom:**
    *   Happiness >= 80
    *   Population >= 100,000
3.  **Economic Powerhouse:**
    *   Money >= 30,000

Upon achieving a win condition, the game pauses and a victory message is displayed.

## Loss Conditions

Game over occurs if *either* of the following happens:

1.  **Bankruptcy:** Money <= 0
2.  **Pollution Crisis:** Pollution >= 100 (causes population to drop to 0)

Upon reaching a loss condition, a game over message is displayed, and the game resets to the initial state.

## Building Stats

| Building        | Cost   | Pollution | Happiness | Population | Income | Income Interval (ms) | Effect Radius (grid units) | Max Count | Special Effects / Notes                                                                                                |
| :-------------- | :----- | :-------- | :-------- | :--------- | :----- | :------------------- | :------------------------- | :-------- | :--------------------------------------------------------------------------------------------------------------------- |
| **House**       | 750    | 1         | 1         | 80         | 0      | -                    | 0                          | None      | Primary source of population. Receives happiness bonus from Schools & Libraries.                                       |
| **Factory**     | 1500   | 8         | -5        | 0          | 150    | 12000                | 0                          | 10        | Generates income. Major source of pollution.                                                                           |
| **Hospital**    | 2500   | 1         | 3         | 0          | 0      | -                    | 0                          | 5         | Special: `reduce_disease` (Effect not fully detailed in code)                                                            |
| **Shop**        | 1200   | 2         | 0         | 0          | 40     | 6000                 | 0                          | 15        | Generates income.                                                                                                      |
| **School**      | 3000   | 2         | 2         | 0          | 0      | -                    | 4                          | 5         | Special: `happiness_bonus_large`. Provides +2 Happiness bonus to Houses within radius.                                   |
| **Wastewater**  | 2200   | 1         | -2        | 0          | 0      | -                    | 0                          | 3         | Special: `periodic_pollution_reduction`. Reduces total pollution by 4 every 6000ms.                                    |
| **Airport**     | 10000  | 15        | -3        | 0          | 500    | 20000                | 0                          | 1         | Generates high income. High pollution.                                                                                 |
| **Court**       | 4000   | 1         | 1         | 0          | 0      | -                    | 0                          | 3         |                                                                                                                        |
| **Fire Station**| 2000   | 2         | 1         | 0          | 0      | -                    | 5                          | 5         | Special: `reduce_disaster_impact`. 50% chance to prevent building destruction from earthquakes within radius.             |
| **Library**     | 1800   | 1         | 2         | 0          | 0      | -                    | 2                          | 8         | Special: `happiness_bonus_small`. Provides +2 Happiness bonus to Houses within radius.                                   |
| **Police Station**| 2200   | 1         | 1         | 0          | 0      | -                    | 5                          | 5         | Special: `reduce_protest_chance`. Reduces the chance of protests occurring by 75% (city-wide effect, radius unused?). |
| **Power Plant** | 6000   | 12        | -4        | 0          | 0      | -                    | 0                          | 3         | High pollution source.                                                                                                 |
| **Science Lab** | 7000   | 5         | 3         | 0          | 100    | 15000                | 0                          | 2         | Generates income.                                                                                                      |
| **Train Station**| 8000   | 8         | -2        | 0          | 300    | 18000                | 0                          | 2         | Generates income. High pollution.                                                                                      |
| **Waste Dump**  | 2500   | 6         | -3        | 0          | 0      | -                    | 0                          | 4         | Source of pollution.                                                                                                   |
| **Water Supply**| 1500   | 1         | 1         | 0          | 0      | -                    | 0                          | 5         |                                                                                                                        |

**Notes:**

*   `Effect Radius` is measured in grid units (each grid square is 32x32 pixels).
*   `Income Interval` is the time in milliseconds between income payouts.
*   Some `special` effects mentioned in the code comments (like `reduce_disease`) don't have explicit implementation details visible in the analyzed functions.
*   The Police Station's effect seems to apply city-wide based on the `checkProtestEvent` logic, despite having an effect radius defined. 